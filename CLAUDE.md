# Dotfiles

macOS-oriented dotfiles repo. The home directory (`~`) is the git repo root.

## Repo structure

Everything is gitignored by default via `*` in `.git/info/exclude`. Files are explicitly force-added (`git add -f`) to be tracked. Submodules also need force-adding.

### Tracked files

- `.zshrc` - zsh config, sources oh-my-zsh
- `.zprofile` - zsh profile
- `.p10k.zsh` - powerlevel10k prompt configuration (generated by `p10k configure`)
- `.gitconfig` - git aliases and settings
- `.gitmodules` - submodule definitions
- `.tmux.conf` - tmux configuration
- `.config/ghostty/config` - Ghostty terminal config
- `.config/nvim/init.lua` - neovim config (lazy.nvim based)
- `.config/nvim/lazy-lock.json` - neovim plugin lockfile
- `.config/zellij/config.kdl` - zellij terminal multiplexer config
- `.claude/settings.json` - Claude Code settings
- `.claude/scripts/context-bar.sh` - Claude Code status line script

### Submodules

External tools are included as git submodules:

- `.tmux/plugins/tpm` - tmux plugin manager
- `.tmux/plugins/tmux-resurrect` - tmux session save/restore
- `.tmux/plugins/tmux-continuum` - automatic tmux session saving
- `.oh-my-zsh/custom/themes/powerlevel10k` - zsh prompt theme

## Key conventions

- **Adding files**: Always use `git add -f <path>` (the global `*` exclude means normal `git add` won't work)
- **Adding submodules**: Use `git submodule add -f <url> <path>`, then may need `git update-index --add --cacheinfo 160000,<commit>,<path>` to stage due to the exclude pattern
- **Shell**: zsh with oh-my-zsh, powerlevel10k theme
- **Editor**: neovim (aliased as `vi`, `vim`)
- **Branches**: `master` is the active branch, `main` exists as the remote default

## Setup on a new machine

```bash
cd ~
git init
git remote add origin git@github.com:mikekelly/dotfiles.git
git pull origin master
echo "*" >> ~/.git/info/exclude
sh -c "$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"
git submodule update --init --depth=1
```
